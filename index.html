<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TFT Profiles - IGN & Rank List</title>

    <!-- Stylesheets -->
    <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <div class="container">
        <h1>ğŸ®</h1>

        <div class="controls">
            <button class="refresh-btn" id="refreshBtn" onclick="loadAllProfiles()">Refresh All Profiles</button>
            <button class="settings-btn" onclick="openSettings()">âš™ï¸ AI Settings</button>
        </div>

        <div class="loading" id="loading">Loading profiles...</div>
        <div class="error" id="error"></div>

        <div class="profiles-grid" id="profilesGrid"></div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeSettings()">&times;</span>
            <h2 class="modal-title">âš™ï¸ Settings</h2>

            <!-- Data Source Section -->
            <div class="settings-section">
                <h3 class="section-title">ğŸ“Š Data Source</h3>
                <div class="form-group">
                    <label>Select API Source:</label>
                    <div class="toggle-group">
                        <button class="toggle-btn active" id="toggleMetaTFT" onclick="setDataSourceUI('metatft')">
                            ğŸŒ MetaTFT
                        </button>
                        <button class="toggle-btn" id="toggleRiot" onclick="setDataSourceUI('riot')">
                            ğŸ® Riot API
                        </button>
                    </div>
                    <p style="font-size:0.75rem;color:#718096;margin-top:8px;">
                        MetaTFT: No API key needed | Riot: Requires API key
                    </p>
                </div>
            </div>

            <hr style="margin:20px 0;border:none;border-top:2px solid #e2e8f0;">

            <!-- Riot API Section -->
            <div class="settings-section" id="riotApiSection">
                <h3 class="section-title">ğŸ® Riot Games API</h3>
                <div class="form-group">
                    <label>Riot API Key:</label>
                    <input type="password" id="riotApiKeyInput"
                        placeholder="RGAPI-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx">
                    <p style="font-size:0.8rem;color:#718096;margin-top:8px;">
                        Get free at: <a href="https://developer.riotgames.com" target="_blank"
                            style="color:#667eea;">Riot Developer Portal</a>
                        <br><span style="color:#e53e3e;">âš ï¸ Dev keys expire every 24 hours</span>
                    </p>
                </div>
                <button class="btn" onclick="saveRiotApiKey()">ğŸ’¾ Save Riot API Key</button>
                <div id="riotApiStatus" class="api-status disconnected">âŒ No Riot API key</div>
            </div>

            <hr style="margin:20px 0;border:none;border-top:2px solid #e2e8f0;">

            <!-- Gemini AI Section -->
            <div class="settings-section">
                <h3 class="section-title">ğŸ¤– AI Analysis (Gemini)</h3>
                <div class="form-group">
                    <label>Google Gemini API Key:</label>
                    <input type="password" id="apiKeyInput" placeholder="Enter API key...">
                    <p style="font-size:0.8rem;color:#718096;margin-top:8px;">
                        Get free at: <a href="https://aistudio.google.com/apikey" target="_blank"
                            style="color:#667eea;">Google AI Studio</a>
                    </p>
                </div>
                <button class="btn" onclick="saveApiKey()">ğŸ’¾ Save API Key</button>
                <div id="apiStatus" class="api-status disconnected">âŒ No API key</div>

                <div class="form-group" style="margin-top:15px;">
                    <label>AI Model:</label>
                    <button class="btn btn-secondary" onclick="fetchModels()" style="margin-bottom:10px;">ğŸ”„ Fetch
                        Models</button>
                    <select id="modelSelect">
                        <option value="gemini-2.0-flash">gemini-2.0-flash</option>
                    </select>
                </div>
                <button class="btn" onclick="saveModel()">ğŸ’¾ Save Model</button>
            </div>
        </div>
    </div>

    <!-- Analysis Modal -->
    <div class="modal" id="analysisModal">
        <div class="modal-content large">
            <span class="close-btn" onclick="closeAnalysis()">&times;</span>
            <h2 class="modal-title">ğŸ§  AI Analysis</h2>
            <div id="analysisContent"></div>
        </div>
    </div>

    <!-- Match History Modal -->
    <div class="modal" id="matchHistoryModal">
        <div class="modal-content large">
            <span class="close-btn" onclick="closeMatchHistoryModal()">&times;</span>
            <h2 class="modal-title">ğŸ“Š Match History</h2>
            <div id="matchHistoryContent"></div>
        </div>
    </div>

    <!-- JavaScript Modules -->
    <script type="module" src="js/main.js"></script>
</body>

</html>